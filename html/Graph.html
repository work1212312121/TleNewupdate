<!DOCTYPE html>
<html lang="en">

<link>
<meta charset="utf-8" />
<title>Siamvayupak IOT</title>
<meta name="description" content="Admin, Dashboard, Bootstrap, Bootstrap 4, Angular, AngularJS" />
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1, minimal-ui" />
<meta http-equiv="X-UA-Compatible" content="IE=edge">

<!-- for ios 7 style, multi-resolution icon of 152x152 -->
<meta name="apple-mobile-web-app-capable" content="yes">
<meta name="apple-mobile-web-app-status-barstyle" content="black-translucent">
<link rel="apple-touch-icon" href="../assets/images/logo.png">
<meta name="apple-mobile-web-app-title" content="Flatkit">
<!-- for Chrome on Android, multi-resolution icon of 196x196 -->
<meta name="mobile-web-app-capable" content="yes">
<link rel="shortcut icon" sizes="196x196" href="../assets/images/logo.png">

<!-- style -->
<link rel="stylesheet" href="../assets/animate.css/animate.min.css" type="text/css" />
<link rel="stylesheet" href="../assets/glyphicons/glyphicons.css" type="text/css" />
<link rel="stylesheet" href="../assets/font-awesome/css/font-awesome.min.css" type="text/css" />
<link rel="stylesheet" href="../assets/material-design-icons/material-design-icons.css" type="text/css" />
<link rel="stylesheet" href="../assets/dist/apexcharts.css" />



<link href="https://fonts.googleapis.com/css?family=Montserrat" rel="stylesheet" />
<link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/font-awesome/4.7.0/css/font-awesome.min.css" />

<link rel="stylesheet" href="../assets/bootstrap/dist/css/bootstrap.min.css" type="text/css" />
<!-- build:css ../assets/styles/app.min.css -->
<link rel="stylesheet" href="../assets/styles/app.css" type="text/css" />
<!-- endbuild -->
<link rel="stylesheet" href="../assets/styles/font.css" type="text/css" />
<script src="scripts/Autorefresh.js" defer></script>
<link rel="stylesheet" href="../assets/styles/slidebar.css">
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0-beta3/css/all.min.css">

<style>
  body {
    font-family: Arial, sans-serif;
    display: flex;
    justify-content: center;
    align-items: center;
    height: flex;
    margin: 0;
    overflow-y: scroll;
    background-color: #fff;

  }

  .padding-box {
    padding: 1rem 15rem 5rem 5rem;

  }

  .box {
    height: auto;
    width: auto;
  }

  .Assumecontainer {
    width: 80%;
    height: 500px;
    margin: 50px auto;
    border: 1px solid #ccc;
    padding: 20px;
    box-shadow: 0 0 10px rgba(0, 0, 0, 0.1);
  }

  .containerRow {
    display: flex;
    justify-content: space-between;
    /* Adjusts space between items */
    flex-wrap: wrap;
    /* Allows wrapping to the next line if needed */
  }

  .chart-container {
    display: flex;
    justify-content: space-around;
    width: 100%;
    max-width: 1600px;
    background-color: #fff;
    padding: 20px;
    border-radius: 8px;
    box-shadow: 0 4px 8px rgba(0, 0, 0, 0.1);
    padding: 5rem 1.5rem;
  }

  .chart-box {
    width: flex;
    height: flex;
    position: center;
    justify-content: space-between;
  }

  .chart-box canvas {
    width: 100%;
    height: 350px;
  }

  .assumeblock {
    display: flex;
    justify-content: space-between;

  }

  .btn {
    background: #1036b3;
    border: solid 1px #013cff;
    background: linear-gradient(180deg, #094aff 0%, #2A4395 35%, #860fad 100%);
    border-radius: 8px;
    color: white;
    padding: flex;
    transition: color .2s ease-in-out, box-shadow .2s ease-in-out;


  }

  .btn:hover {
    color: #fff;
    box-shadow: inset 200px 0 0 0 #54b3d6;

  }

  #temp-bar {
    display: none;
  }

  table {
    width: 100%;
    border-collapse: collapse;
    color: #f0f0f0;
  }

  th,
  td {
    padding: 8px;
    text-align: left;
    border: 1px solid #000000;
  }

  th {
    background-color: #4a4a4a;
  }

  tr:nth-child(even) {
    background-color: #3a3a3a;
  }

  tr:nth-child(odd) {
    background-color: #2a2a2a;
  }

  .highlighted {
    background-color: #3957ff;
  }

  .container {
    overflow-y: auto;
    width: auto;
    height: auto;

  }
</style>
</head>

<body>

  <div class="app" id="app">

    <!-- ############ LAYOUT START-->

    <!-- aside -->
    <div id="sidebar" class="sidebar">
      <a href="javascript:void(0)" class="closebtn" onclick="closeSidebar()">&times;</a>
      <a href="../html/Main.html"><i class="fas fa-home"></i> Home</a>
      <a href="../html/Logdata.html"><i class="fas fa-file-alt"></i> LogTable</a>
      <a href="../html/Map.html"><i class="fas fa-map-marker-alt"></i> Map</a>
      <a href="../html/Graph.html"><i class="fas fa-chart-line"></i> Charts</a>
    </div>

    <!-- / aside -->

    <!-- content -->
    <div id="content" class="app-content box-shadow-z3" role="main">
      <div class="app-header info box-shadow-z4 navbar-md">
        <div class="navbar navbar-toggleable-sm flex-row align-items-center">
          <!-- Open side - Naviation on mobile -->
          <a data-toggle="modal" data-target="#aside" class="hidden-lg-up mr-3">
            <i class="material-icons">&#xe5d2;</i>
          </a>
          <!-- / -->

          <!-- Page title - Bind to $state's title -->
          <div class="mb-0 h5 no-wrap" ng-bind="$state.current.data.title" id="pageTitle"></div>

          <!-- navbar collapse -->
          <div class="collapse navbar-collapse" id="collapse">
            <!-- link and dropdown -->
            <ul class="nav navbar-nav mr-auto">
              <li class="nav-item dropdown">
                <div id="main">
                  <button class="openbtn" onclick="openSidebar()">â˜° Menu </button>
                </div>
                <!-- / aside -->
                <div ui-include="'../views/blocks/dropdown.new.html'"></div>
              </li>
            </ul>

            <div ui-include="'../views/blocks/navbar.form.html'"></div>
            <!-- / -->
          </div>
          <!-- / navbar collapse -->

          <!-- navbar right -->
          <ul class="nav navbar-nav ml-auto flex-row">
            <!-- <li class="nav-item dropdown pos-stc-xs">
            <a class="nav-link mr-2" href data-toggle="dropdown">
              <i class="material-icons">&#xe7f5;</i>
              <span class="label label-sm up warn">3</span>
            </a>
            <div ui-include="'../views/blocks/dropdown.notification.html'"></div>
          </li> -->
            <li class="nav-item dropdown">
              <a class="nav-link p-0 clear" href="#" data-toggle="dropdown">
                <span class="avatar w-32">
                  <img src="../assets/images/a2.jpg" alt="...">
                  <i class="on b-white bottom"></i>
                </span>
              </a>
              <div ui-include="'../views/blocks/dropdown.user.html'"></div>
            </li>
            <li class="nav-item hidden-md-up">
              <a class="nav-link pl-2" data-toggle="collapse" data-target="#collapse">
                <i class="material-icons">&#xe5d4;</i>
              </a>
            </li>
          </ul>
          <!-- / navbar right -->
        </div>
      </div>
      <div class="app-footer">
        <div class="p-2 text-xs">
          <div class="pull-right text-muted py-1">
            &copy; Copyright <strong>Siamvayupak</strong> <span class="hidden-xs-down">- Built with hopeless</span>
            <a ui-scroll-to="content"><i class="fa fa-long-arrow-up p-x-sm"></i></a>
          </div>
         
        </div>
      </div>


      <!-- ############ PAGE START-->
      <!-- <div class="box"
        style="background: linear-gradient(315deg, #9A0C12, #3F0505);margin-top: 6rem; width: auto; height: 220px;border-radius: 10px;">
        <div class="box-header" style="margin-left: 2rem;">
          <h3><strong> Statistics Indoor & Outdoor</strong></h3>
          <h4>Report from sensors</h4>
          <small>Calculated every 10 minutes</small>
        </div>
        <div class="container">
          <table>
            <thead>
              <tr>
                <th>Asset</th>
                <th>Max value</th>
                <th>Min value</th>
                <th>Average</th>
              </tr>
            </thead>
            <tbody>
              <tr>
                <td><strong>INDOOR</strong></td>
                <td id="indoorMax"></td>
                <td id="indoorMin"></td>
                <td id="indoorAvg"></td>
              </tr>
              <tr>
                <td><strong>OUTDOOR</strong></td>
                <td id="outdoorMax"></td>
                <td id="outdoorMin"></td>
                <td id="outdoorAvg"></td>
              </tr>
            </tbody>
          </table>
        </div>
      </div> -->


      <div class="row">
        <div class="col-md-8 col-xl-8">
          <div class="padding-box" style="background-color:#fff ;margin-left: 10px;margin-top: 6rem; border-radius: 10px; ">
            <div class="margin">
              <h5 class="mb-0 _300"> Temperature Chart</h5>
              <small class="text-muted">Report Data real time </small>
              <div class="assumeblock">
                <button id="toggle-chart-btn" class="btn">Toggle Chart</button>
              </div>
            </div>


            <div class="chart-box">
              <div id="temp-line"></div>
              <div id="temp-bar"></div>
            </div>
          </div>
        </div>
        <div class="col-md-4 col-xl-4">
          <div class="box"
        style="background: linear-gradient(315deg, #9A0C12, #3F0505);margin-top: 12rem; width: auto; height: 220px;border-radius: 10px;padding-top: 1rem;">
        <div class="box-header" style="margin-left: 2rem;">
          <h3><strong> Statistics Indoor & Outdoor</strong></h3>
          <h4>Report from sensors</h4>
          <small>Calculated every 10 minutes</small>
        </div>
        <div class="container">
          <table>
            <thead>
              <tr>
                <th>Asset</th>
                <th>Max value</th>
                <th>Min value</th>
                <th>Average</th>
              </tr>
            </thead>
            <tbody>
              <tr>
                <td><strong>INDOOR</strong></td>
                <td id="indoorMax"></td>
                <td id="indoorMin"></td>
                <td id="indoorAvg"></td>
              </tr>
              <tr>
                <td><strong>OUTDOOR</strong></td>
                <td id="outdoorMax"></td>
                <td id="outdoorMin"></td>
                <td id="outdoorAvg"></td>
              </tr>
            </tbody>
          </table>
        </div>
      </div>
        </div>
      </div>

      <script>
        async function fetchDataAndCalculate(url) {
          try {
            const response = await fetch(url);
            const data = await response.json();
            const values = data.map(item => parseFloat(item.rawdata));
            const max = Math.max(...values);
            const min = Math.min(...values);
            const avg = values.reduce((sum, value) => sum + value, 0) / values.length;
            return { max, min, avg };
          } catch (error) {
            console.error('Error fetching data:', error);
            return { error: 'Failed to fetch data' };
          }
        }

        document.addEventListener("DOMContentLoaded", async function () {
          const indoorUrl = 'https://partially-unique-haddock.ngrok-free.app/api/indoor_temperature';
          const outdoorUrl = 'https://partially-unique-haddock.ngrok-free.app/api/outdoor_temperature';

          const indoorResult = await fetchDataAndCalculate(indoorUrl);
          const outdoorResult = await fetchDataAndCalculate(outdoorUrl);

          if (indoorResult.error || outdoorResult.error) {
            console.error('Error fetching data. Please check your URLs.');
          } else {
            document.getElementById('indoorMax').textContent = indoorResult.max.toFixed(2);
            document.getElementById('indoorMin').textContent = indoorResult.min.toFixed(2);
            document.getElementById('indoorAvg').textContent = indoorResult.avg.toFixed(2);
            document.getElementById('outdoorMax').textContent = outdoorResult.max.toFixed(2);
            document.getElementById('outdoorMin').textContent = outdoorResult.min.toFixed(2);
            document.getElementById('outdoorAvg').textContent = outdoorResult.avg.toFixed(2);
          }
        });
      </Script>
      <script src="../libs/jquery/jquery/dist/jquery.js"></script>
      <!-- Bootstrap -->
      <script src="../libs/jquery/tether/dist/js/tether.min.js"></script>
      <script src="../libs/jquery/bootstrap/dist/js/bootstrap.js"></script>
      <!-- core -->
      <script src="../libs/jquery/underscore/underscore-min.js"></script>
      <script src="../libs/jquery/jQuery-Storage-API/jquery.storageapi.min.js"></script>
      <script src="../libs/jquery/PACE/pace.min.js"></script>

      <script src="scripts/config.lazyload.js"></script>

      <script src="scripts/palette.js"></script>
      <script src="scripts/ui-load.js"></script>
      <script src="scripts/ui-jp.js"></script>
      <script src="scripts/ui-include.js"></script>
      <script src="scripts/ui-device.js"></script>
      <script src="scripts/ui-form.js"></script>
      <script src="scripts/ui-nav.js"></script>
      <script src="scripts/ui-screenfull.js"></script>
      <script src="scripts/ui-scroll-to.js"></script>
      <script src="scripts/ui-toggle-class.js"></script>


      <script src="scripts/app.js"></script>
      <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>

      <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.2.1/jquery.slim.min.js"></script>
      <script src="scripts/Chart.js"></script>
      <script type="module" src="scripts/Chart.js"></script>
      <script src="../assets/dist/apexcharts.min.js"></script>
      <script src="scripts/slidebarr.js"></script>

      <!-- ajax -->
      <script src="../libs/jquery/jquery-pjax/jquery.pjax.js"></script>
      <script src="scripts/ajax.js"></script>

      <!-- endbuild -->

</body>


</html>